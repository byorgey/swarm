creative: true
description: Commuting robots meet at an intersection
entities: []
name: Traffic simulation
robots:
  # We include a base robot to stabilize the screen at a fixed position.
  - name: base
    display:
      char: Ω
      attr: robot
    dir: east
    loc: [10, 3]
    devices:
      - logger
      - hearing aid
      - treads
  - name: drone
    system: true
    display:
      invisible: false
    dir: east
    devices:
      - lodestone
    inventory:
      - [1, bit (0)]
    program: |
      run "data/scenarios/Vignettes/_roadway/drone.sw"
  - name: stoplight
    system: true
    display:
      invisible: true
    dir: north
    loc: [24, 9]
    devices:
      - lodestone
    inventory:
      - [1, bit (0)]
    program: |
      run "data/scenarios/Vignettes/_roadway/coordinator.sw"
version: 1
world:
  palette:
    '.': [grass]
    'd': [grass, null, drone]
  structures:
    - name: road segment
      structure:
        palette:
          'S':
            - stone
          'w':
            - ice
          '█':
            - stone
            - sand
        map: |
          SSSSSS
          SSSSSS
          ███SSS
          SSSSSS
          SSSSSS
          wwwwww
    - name: tunnel
      structure:
        mask: '.'
        palette:
          '@': [stone, boulder]
          'b': [blank]
        map: |
          ..@@@@..
          .@bbbb@.
          @@bbbb@@
          @bbbbbb@
    - name: intersection
      structure:
        palette:
          'S':
            - stone
          'w':
            - ice
          '█':
            - stone
            - sand
        map: |
          SSSSSS
          SSSSSS
          SSSSSS
          SSSSSS
          SSSSSS
          SSSSSS
  placements:
    - src: tunnel
      offset: [3, -21]
      orient:
        up: west
    - src: tunnel
      offset: [71, -21]
      orient:
        up: east
    - src: road segment
      offset: [6, -22]
      orient:
        up: south
        flip: true
    - src: road segment
      offset: [12, -22]
      orient:
        up: south
        flip: true
    - src: road segment
      offset: [18, -22]
      orient:
        up: south
        flip: true
    - src: road segment
      offset: [24, -22]
      orient:
        up: south
        flip: true
    - src: road segment
      offset: [30, -22]
      orient:
        up: south
        flip: true
    - src: intersection
      offset: [36, -22]
    - src: road segment
      offset: [42, -22]
    - src: road segment
      offset: [48, -22]
    - src: road segment
      offset: [54, -22]
    - src: road segment
      offset: [60, -22]
    - src: road segment
      offset: [66, -22]
    - src: road segment
      offset: [36, -28]
      orient:
        up: east
    - src: road segment
      offset: [36, -34]
      orient:
        up: east
    - src: road segment
      offset: [36, -40]
      orient:
        up: east
    - src: road segment
      offset: [36, -16]
      orient:
        up: west
        flip: true
    - src: road segment
      offset: [36, -10]
      orient:
        up: west
        flip: true
    - src: road segment
      offset: [36, -4]
      orient:
        up: west
        flip: true
  upperleft:
    - -18
    - 30
  map: |
    dddddddddd....................................................................
    dddddddd......................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
    ..............................................................................
